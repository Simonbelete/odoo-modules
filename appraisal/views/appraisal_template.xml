<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!-- Main layout -->
    <template id="appraisal.layout" inherit_id="web.frontend_layout" primary="True" />

    <template id="appraisal_page_index">
        <t t-call="appraisal.layout">
            <div style="height: 100vh; 
                        display: flex;
                        flex-direction: column;
                        gap: 100px;
                        align-items: center;
                        justify-content: center;">

                <t t-foreach="categories" t-as="category">
                    <table class="table table-sm" border="1" style="width: 600px; border-color: #dee2e6;">
                        <thead style="border: 30px">
                            <tr>
                                <th colspan="3" style="border: 2px solid #dee2e6; background: #dee2e6">
                                    <h4 style="text-align:center; font-weight: bold; margin: 2px" t-field="category.name" />
                                </th>
                            </tr>
                            <tr>
                                <th style="border: 2px solid #dee2e6">
                                    #
                                </th>
                                <th style="border: 2px solid #dee2e6">
                                   <p style="text-align:center; margin: 0;">Key Indicators</p>
                                </th>
                                <th style="border: 2px solid #dee2e6">
                                    Score
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="questions" t-as="question">
                                <t t-if="category.id==question.category_id.id">
                                    <tr>
                                        <td><span t-field="question.sequence" /></td>
                                        <td><span t-field="question.title" /></td>
                                        <td></td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </t>

            </div>
            
            <!-- <t t-set="categories" t-value="[]" />
            <t t-foreach="questions" t-as="q">
                <t t-set="categories" t-value="categories+[q.category_id]"/>
            </t>
            <t t-foreach="set(categories)" t-as="category">
                <div><strong t-esc="category.name"></strong></div>
                <div>
                    <t t-foreach="questions" t-as="question">
                        <t t-if="category.id==question.category_id.id">
                            <div><span t-field="question.title"/></div>
                        </t>
                    </t>
                </div>
            </t> -->
        </t>
    </template>

    <!-- Question Widget -->
    <template id="question_container">
        <input type="number" step="any" class="form-control o_survey_question_numerical_box bg-transparent text-dark rounded-0 p-0"
            t-att-value="question"/>
    </template>

</odoo>