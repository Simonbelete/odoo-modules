<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- <template id="report_production_products">
        <t t-foreach="docs" t-as="property">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>
                            <span t-field="mrp.production.name"/>
                        </h2>
                        <div>
                            <strong>Expected Price: </strong>
                            <span t-field="mrp.production.date_planned_start"/>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Qty</th>
                                </tr>
                            </thead>
                            <tbody>
                               <tr>abc</tr>
                            </tbody>
                        </table>
        'report/production_report_views.xml',
                    </div>
                </t>
            </t>
        </t>
    </template> -->

    <template id="my_report_mrp_bom">
        <div>
            <div>
                <div>
                    <h1>Cost Analysis</h1>
                    <h1>Cost</h1>
                </div>
            </div>
            <div>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th name="th_mrp_bom_h">BoM</th>
                            <th class="text-right">Quantity</th>
                            <th class="text-left" groups="uom.group_uom">Unit of Measure</th>
                            <th t-if="data['report_structure'] != 'bom_structure'" class="o_mrp_prod_cost text-right" title="This is the cost defined on the product.">Product Cost</th>
                            <th t-if="data['report_structure'] != 'bom_structure'" class="o_mrp_bom_cost text-right" title="This is the cost based on the BoM of the product. It is computed by summing the costs of the components and operations needed to build the product.">BoM Cost</th>
                            <th t-if="data['report_type'] == 'html' and data['has_attachments']" class="o_mrp_has_attachments" title="Files attached to the product">Attachments</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </template>

        <template id="report_production_products">
            <t t-set="data_report_landscape" t-value="False"/>
            <t t-call="web.basic_layout">
                <t t-call-assets="mrp.assets_common" t-js="False"/>
                <t t-foreach="docs" t-as="data">
                    <div class="page">
                        <div class="col-3">
                            <strong>Responsible:</strong><br/>
                            <span t-field="data.user_id"/>
                        </div>
                        <div class="col-3">
                            <strong>Finished Product:</strong><br/>
                            <span t-field="data.product_id"/>
                        </div>
                        <div class="col-3" t-if="data.product_description_variants">
                            <strong>Description:</strong><br/>
                            <span t-field="data.product_description_variants"/>
                        </div>
                        <div class="col-3">
                            <strong>Quantity to Produce:</strong><br/>
                            <span t-field="data.product_qty"/>
                            <span t-field="data.product_uom_id.name" groups="uom.group_uom"/>
                        </div>
                        
                        <table class="table table-sm" t-if="data.move_raw_ids">
                            <t t-set="has_product_barcode" t-value="any(m.product_id.barcode for m in data.move_raw_ids)"/>
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th t-attf-class="{{ 'text-right' if not has_product_barcode else '' }}">Quantity</th>
                                    <th>Product Type</th>
                                    <th t-if="has_product_barcode" width="15%" class="text-center">Barcode</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-if="data.move_raw_ids">
                                    <tr t-foreach="data.move_raw_ids" t-as="raw_line">
                                        <td>
                                            <span t-field="raw_line.product_id"/>
                                        </td>
                                        <td t-attf-class="{{ 'text-right' if not has_product_barcode else '' }}">
                                            <span t-field="raw_line.product_uom_qty"/>
                                            <span t-field="raw_line.product_uom" groups="uom.group_uom"/>
                                        </td>

                                        <td>
                                            <spant t-field="raw_line.bom_line_id.cost" />
                                        </td>
                                        
                                        <td t-if="has_product_barcode" width="15%" class="text-center">
                                            <t t-if="raw_line.product_id.barcode">
                                                <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', raw_line.product_id.barcode, 600, 100)" style="width:100%;height:35px" alt="Barcode"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <!-- <p><span t-field="data.name"/></p>
                        <div t-foreach="data.bom_id.bom_line_ids" t-as="bl">
                            <t t.field="bl.product_id" />
                        </div> -->
                        <!-- <t t-call="abc_manufacturing.my_report_mrp_bom"/> -->
                    </div>
                    <p style="page-break-before:always;"> </p>
                </t>
            </t>
            <!-- <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <h2>Report title</h2>
                            <p>This object's name is <span t-field="data.name"/></p>
                        </div>
                        <div>
                            <h1>Hello World</h1>
                        </div>
                    </t>
                </t>
            </t> -->
        </template>
</odoo>